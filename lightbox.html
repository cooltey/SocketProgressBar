
<html>
<head>
	<title> Lightbox Progress Bar </title>
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/css/bootstrap.min.css" integrity="sha384-/Y6pD6FV/Vv2HJnA6t+vslU6fwYXjCFtcEpHbNJ0lyAFsXTsjBbfaDjzALeQsN6M" crossorigin="anonymous">
	<!-- <link href="css/fs-modal.min.css" rel="stylesheet"> -->
	<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.11.0/umd/popper.min.js" integrity="sha384-b/U6ypiBEHpOf/4+1nzFpr53nxSS+GLCkfwBdFNTxtclqqenISfwAzpKaMNFNmj4" crossorigin="anonymous"></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/js/bootstrap.min.js" integrity="sha384-h0AbiXch4ZDo7tp9hKZ4TsHbi047NrKGLO3SEJAg45jXxnGIfYzk4Si90RDIqNm1" crossorigin="anonymous"></script>
	<!-- <script src="js/fs-modal.min.js"></script> -->
	<style>
		.hidden-area{
			display: none;
		}

		.grey-font{
			color: #CCCCCC;
			font-size: 14px;
			margin-top: 15px;
			margin-bottom: 15px;
		}

		.bank-accounts-manual{
			text-align: center;
			margin: 20px;
		}

		.bank-input-group{
			margin: 0 auto;
			width: 70%;
			margin-top: 50px;
			margin-bottom: 50px;
		}


		.bank-accounts-information{
			margin: 40px;
		}

		.bank-accounts-img{
			text-align: center;
			margin: 20px;
		}

		.bank-accounts-img .bank-icon{
			margin: 5px;
		}

		.bank-linking-process{
			margin-top: 30px;
			text-align: center;
		}

		.bank-linking-desc{
			font-size: 16px;
			margin-top: 15px;
			margin-bottom: 15px;
		}

		.bank-accounts-information-success{
			text-align: center;
		}

		.pull-right{
			float: right;
		}

		/* Mobile */
		@media all and (max-width: 768px) { 
			.modal-dialog{
				margin: 0px;
				width: 100% !important;
				height: 100%;
			}

			.modal-content{
				/*height: 100% !important;*/
				border: 0px  !important;
     			border-radius: 0 !important;
			}

			.modal-backdrop {
			    position: fixed;
			    top: 0;
			    right: 0;
			    bottom: 0;
			    left: 0;
			    z-index: 1040;
			    background-color: #FFFFFF;
			}
			.modal-backdrop.in {
			    filter: alpha(opacity=0);
			    opacity: .0;
			}
		} 

	</style>
</head>
<body>
	<div class="container">
		<div>
			<br><br>
			<h4>Add bank account in lightbox</h4>
			<hr>
			<!-- Button trigger modal -->
			<button type="button" class="btn btn-primary resetBtn" data-toggle="modal" data-target="#addBankAccount">
			  Add bank account
			</button>

			<!-- Modal -->
			<div class="modal fade large-modal modal-fullscreen" id="addBankAccount" tabindex="-1" role="dialog" aria-labelledby="addBankAccount" aria-hidden="true">
			  <div class="modal-dialog modal-lg" role="document">
			    <div class="modal-content">
			      <div class="modal-header">
			        <h5 class="modal-title" id="addBankAccount">Add your bank account</h5>
			        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
			          <span aria-hidden="true">&times;</span>
			        </button>
			      </div>
			      <div class="modal-body" id="modal-content">
			      </div>
			      <div class="modal-footer">
			        <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
			      </div>
			    </div>
			  </div>
			</div>
		</div>
	</div>

	<!-- Bank account selection -->
	<div class="hidden-area" id="step-1">
		<div class="bank-accounts-manual">
        	<!-- Desc -->
			<h3>See all your money in one number</h3>
			<p class="grey-font">Your net worth is everything you have minus everything you owe, Add your bank accounts, loans and credit cards and we'll do the math for you.</p>
	        <!-- Desc -->
			
	        <!-- Seach bar field -->
	        <div class="input-group bank-input-group">
		      <input type="text" class="form-control" placeholder="Ex. Bank of America, Chase" aria-label="Ex. Bank of America, Chase">
		      <span class="input-group-btn">
		        <button class="btn btn-info" type="button">Search</button>
		      </span>
		    </div>
        	<!-- Seach bar field -->
		</div>
		<hr>
		<div class="bank-accounts-img">
			<p class="grey-font">Or choose from these popular bank accounts</p>
			<img class="bank-icon" src="http://fakeimg.pl/150x100/" data-bankid="1">
			<img class="bank-icon" src="http://fakeimg.pl/150x100/" data-bankid="2">
			<img class="bank-icon" src="http://fakeimg.pl/150x100/" data-bankid="3">
			<img class="bank-icon" src="http://fakeimg.pl/150x100/" data-bankid="4">
			<img class="bank-icon" src="http://fakeimg.pl/150x100/" data-bankid="5">
			<img class="bank-icon" src="http://fakeimg.pl/150x100/" data-bankid="6">
			<img class="bank-icon" src="http://fakeimg.pl/150x100/" data-bankid="7">
			<img class="bank-icon" src="http://fakeimg.pl/150x100/" data-bankid="8">
		</div>

		 <hr>
	</div>

	<!-- Add username & password selection -->
	<div class="hidden-area" id="step-2">
		<div class="bank-accounts-information">
        	<!-- Desc -->
			<h3>Enter your <span id="bank-name"></span> username and passowrd</h3>
			<p></p><br><br>
			<!-- Desc -->

        	<div class="form-group">
			    <label for="username">Username</label>
			    <input type="text" class="form-control" id="username-field" aria-describedby="usernameHelp" placeholder="Enter your bank account username">
			    <small id="usernameHelp" class="form-text text-muted">We'll never share your information with anyone else.</small>
			</div>
			<div class="form-group">
			    <label for="password">Password</label>
			    <input type="password" class="form-control" id="passowrd-field" placeholder="Password">
			</div>
			<button type="submit" class="btn btn-primary pull-right" onclick="displayBlock($('#step-3'));">Next</button>
		</div>
	</div>

	<!-- Link to bank account and processes data -->
	<div class="hidden-area" id="step-3">
		<div class="bank-accounts-information">
        	<!-- Desc -->
			<h3>Linking to your banking account</h3>
			<p></p><br><br>
			<!-- Desc -->
			<!-- Progress Bar -->
			<div class="progress">
			  <div class="progress-bar" role="progressbar" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100"></div>
			</div>
			<!-- Progress Bar -->

			<div class="bank-linking-process">
				<p class="bank-linking-desc">

				</p>
				<p class="grey-font">Tips: XXXX</p>
			</div>
		</div>
	</div>

	<!-- Link to bank account and processes data -->
	<div class="hidden-area" id="step-4">
		<div class="bank-accounts-information-success">
        	<!-- Desc -->
			<h3>Success!</h3>
			<p>Let's go to your account overview</p><br><br>
			<!-- Desc -->
			
			<button type="button" class="btn btn-primary">Let's GO!</button> 
		</div>
	</div>

	<script>

		var dummy_bank = ["BOA", "BOA2", "BOA3", "BOA4", "BOA5", "BOA6", "BOA7", "BOA8"];

		function displayBlock(div_id){

			$("#modal-content").html("");

			if(div_id){
				var clone_div = div_id.clone();
				// div_id.remove();
				clone_div.removeAttr("class").appendTo("#modal-content");


				// go to step 2 and bring bank id to it
				if(clone_div.attr("id") == "step-1"){
					$(".bank-icon").click(function(){
						var bank_id = parseInt($(this).attr("data-bankid"));

						$("#bank-name").html(dummy_bank[bank_id-1]);

						displayBlock($("#step-2"));
					});
				}

				if(clone_div.attr("id") == "step-3"){

					updateProgressBar(0, "Getting ready...");
					// doing ajax
					// 1. linking to bank account
					setTimeout(function (){

						console.log("linkToBankAccount");
						// using AJAX
						// ...

						// when finish
						updateProgressBar(33, "Some Tips 1");


						// 2. gather data
						setTimeout(function(){
							console.log("gatheringData");
							// using AJAX
							// ...

							// when finish
							updateProgressBar(66, "Some Tips 2");


							// 3. go to result page
							setTimeout(function(){
								console.log("goToResultPage");
								// using AJAX
								// ...

								// when finish
								updateProgressBar(100, "Some Tips 3");

								setTimeout(function(){
									displayBlock($("#step-4"));
								}, 1000);
							}, 2000);
						}, 2000);
					}, 2000);

				}

			}
		}

		function updateProgressBar(percentage, tips){
			$(".progress-bar").css("width", percentage + "%");
			$(".bank-linking-desc").hide();
			$(".bank-linking-desc").html("");
			$(".bank-linking-desc").html(tips).show();
		}


		// simple steps
		displayBlock($("#step-1"));

		// reset btn
		$(".resetBtn").click(function(){
			displayBlock($("#step-1"));
		});

	</script>
</body>
</html>